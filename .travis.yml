language: python
python: '3.6'
dist: trusty
sudo: true
services:
- postgresql
install:
- pip install -r requirements.txt
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
env:
  global:
  - DATABASE_URL="postgres://postgres:@localhost/travis_ci_test"
  - ENVIRONMENT="TEST"
  - secure: Ph9pprIPeJ9JLQjVmnegarKlI75+jCBXQDt2qsnaxgunzluCpBzW3beHqHcwGLkDuDQ9z2ELx3DnXMqq/X0iIhYZH8SoiYVfLf2YawUj/cIEblCpIMPvEmP5uTKQLztiLK7/OrtOHnjfwm/RLLpv8WvckwiC2T/NBOqRmq1YPcU1PAho+mF8RHcN4Wjl3g5MppJHuQKyt+mTDl18qOnhcz++UoFZtOaG5ZXSmwRPfPiUEa6lySNvxwg59o6laBhuRpYmXlgykFKVFs79iOoMSlhRGZ4wn6Gzu6PuVa3HYmmsa3MrC+jks73zx8gjqE6obKPOqziKiKEHUurCn+xEmUft6MoAIW7+8SIWktw8+dJvNbI2MU5g5upwGNf6zreZkJfXyuumXDLYCVY73GcqznKS9mmyDx+NHQ6NneuURIto+9GQSg5jP1ztqXiZSOtzrxAlFzX4DvoZR7+d9GE1tY/aJl9RdRd4/RMcSWYedAiAuuLPpUnFuhHUoOyUaBLmKYqBV2g67RF5fG5JvJ7sAgNAyQ/ObvkfGerHeTtKH3DbxhmayzqaNDnuh3IZoN8+WGvAnULatFFPUL70Y7Cds7IBPDGM1Zg1vgTIQ2Plc8AD4XJLrhc58QHZEBSIhrhHEKqHUOr8JFLEwx4+6I6jyEksMBUDavCKj4e6Dm+VZC0=
script:
- python manage.py test
deploy:
  provider: heroku
  api_key:
    secure: T2jGYTVHdx4DeuVpar/1FVdDi6TzLSYmrOH88VUyk8IuE/Z3IwlWyByd0L14HhwwkG/Tu6R/KDhPs8muidr2xhDxE9pQWO8fJckD2HaT8ICpgQ5lBqqzQcpxNLFeevBxB15bLwDrbOBTgVhaYXNvoWoQ8m3FebRfzvtcSNapmT/F7XW7OkzkRSa4fAc8TKoo6wNIABT2qSQUsw0lXemVWchcbpCqF9Ucf7wGaF9gA8uRviHxkcFeChaPDnv897CJgVoTFRhRCDEPcz6vnvnqa/tP4lq4GzSBYBPEXkBGzsxRjwmlvuX7KNS6gtWNnxwPGAC2FT+lvtRASthfyqXS0sZkKsqVJgjowIwuAXbBaKZYepkMxHE2rSblAYQQdCVbl+QfVGJe7QnfqHQyWuyy6P24pXwS3KlvuI5MG09yiYVb6woWc+y6BwdvLR2ouJMbRWe8jMy3Z66HrJ8QjfXDE3NycXe97GC56aShb0hxIxTQxtYS6kQUJoxI++nhkZ7uCZOgewEIWm04ojlxNOS8ZUmiviiO0i4z7aVgHymHP5BXV4mW3KvkoSUuPtZ5CRsSGdUJnYmW0iDZxv5cAUzfr3CiWfpyS4nwCF1z1wX/6QMjfIpmAP5y3+Lo+R1pJhjwS1PSOOfGm0kPcXayqi7oaeHkwLyDNf3EQzgWLO88tIU=
  app: reviewer-api
  on: master
  run: python manage.py migrate
