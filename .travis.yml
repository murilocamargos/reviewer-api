language: python
python: '3.6'
dist: trusty
sudo: true
services:
- postgresql
install:
- pip install -r requirements.txt
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
env:
  global:
  - DATABASE_URL="postgres://postgres:@localhost/travis_ci_test"
  - ENVIRONMENT="TEST"
  - secure: Ph9pprIPeJ9JLQjVmnegarKlI75+jCBXQDt2qsnaxgunzluCpBzW3beHqHcwGLkDuDQ9z2ELx3DnXMqq/X0iIhYZH8SoiYVfLf2YawUj/cIEblCpIMPvEmP5uTKQLztiLK7/OrtOHnjfwm/RLLpv8WvckwiC2T/NBOqRmq1YPcU1PAho+mF8RHcN4Wjl3g5MppJHuQKyt+mTDl18qOnhcz++UoFZtOaG5ZXSmwRPfPiUEa6lySNvxwg59o6laBhuRpYmXlgykFKVFs79iOoMSlhRGZ4wn6Gzu6PuVa3HYmmsa3MrC+jks73zx8gjqE6obKPOqziKiKEHUurCn+xEmUft6MoAIW7+8SIWktw8+dJvNbI2MU5g5upwGNf6zreZkJfXyuumXDLYCVY73GcqznKS9mmyDx+NHQ6NneuURIto+9GQSg5jP1ztqXiZSOtzrxAlFzX4DvoZR7+d9GE1tY/aJl9RdRd4/RMcSWYedAiAuuLPpUnFuhHUoOyUaBLmKYqBV2g67RF5fG5JvJ7sAgNAyQ/ObvkfGerHeTtKH3DbxhmayzqaNDnuh3IZoN8+WGvAnULatFFPUL70Y7Cds7IBPDGM1Zg1vgTIQ2Plc8AD4XJLrhc58QHZEBSIhrhHEKqHUOr8JFLEwx4+6I6jyEksMBUDavCKj4e6Dm+VZC0=
script:
- python manage.py test
deploy:
  provider: heroku
  api_key:
    secure: voOJtIWq0EA4n4ZruV6djTF0dYxzvATbt3VXePlqj+Y0Zr5fxOhMxAquEyIiIliw7m/y0DolQZoZxMRyLEsT43OpgyI4QRGfPn2kcliDOP+Y8GvZSRMN4fBZ5inuEz0+N+nGI4p/7tntK/T5060GnFWs3YA1Hlmq0NLYk8IuMME2SH3xUuijzsDjCREnBzvlfi0nfCRD2XQL9vbkAiR38flbpOpacluRXLnYjH8xxAi18Qz4UAK5aQrQZTlPOzMh/GPA6UmfbLjaugH8jiD4ywteF5c9TnFYo20nwq+zVuvPfOxblf6MvzPI724reWil1/RlEapnYHAmGPI3q8ciehZZ3VsGeonIVgmx1yma1g+HG231cwJTwSiZNxD+V8sUDKcUaQ0FACOd8gdgWB9U1gPheWtq6ns++TSa45KuUFsSobxT4qEaTQm1ndR8ZpUTY876xj4fA18skr8dbFWVV+sizJ1oY3wYjlBQgrFc7DMlUTzofql5GzJgB7lXCpm75C37VDnJoj1N01zcchWCjA7YKW1zWl2uQd3+FJTC3NFxjIftj/FCXqGqH1e2mSOMyZ53piglgA3ydoLAyTMjdNZBbrAnvaW+Ackt42mYmhMsTKTnSQ0j0rc+i7K8WYN9tDCTUP+N6W1IZojmnRxADW7PU6HNnvVaEGYIKWWNPW4=
  app:
    master: reviewer-api
  run: python manage.py migrate
